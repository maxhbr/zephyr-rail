---
config:
---
flowchart LR;

  subgraph RailBoard
    direction TB 
    MCU_Left@{ label: "XIAO nRF54L15" }
    MCU_Right@{ label: "XIAO nRF54L15 (Sense)" }
    MCU_Left <-->|UART| MCU_Right
    IMU@{label: "LSM6DSO"}
    MCU_Right -->|I2C| IMU
    ULN2003A
    MCU_Right    -->|ENA+| ULN2003A
    MCU_Right    -->|DIR+| ULN2003A
    MCU_Right    -->|PUL+| ULN2003A
  end
  subgraph Rail
    StepperMotor
    PositioningSensor
    MCU_Right -..-> PositioningSensor
  end

  24Vto5V
  24V@{ shape: bolt }
  24V ===|24V| 24Vto5V
  RailBoard ===|5V via USB| 24Vto5V
  24Vto5V ===|24V| StepperMotor
  ULN2003A    -->|ENA+| StepperMotor
  ULN2003A    -->|DIR+| StepperMotor
  ULN2003A    -->|PUL+| StepperMotor

  Camera@{label: "A7Rv"}
  MCU_Right-. bluetooth .->Camera

  style PositioningSensor stroke-dasharray: 5 5

  PWA-. bluetooth .->MCU_Left